name: ZenPacks.itri.BmcMonitor

zProperties:
  zBmcAddress:
    category: BMC
    type: string

  zIpmiUsername:
    category: IPMI
    type: string
    default: "admin"
  
  zIpmiPassword:
    category: IPMI
    type: password
    default: "admin"

classes:
   BmcServer:
      base: [zenpacklib.Device]
      properties:
         power_status:
            type: boolean
            label: Power Status

device_classes:
   /BMC:
      remove: true
      zProperties:
         zPythonClass: ZenPacks.itri.BmcMonitor.BmcServer
         zIpmiUsername: admin
         zIpmiPassword: admin
         zDeviceTemplates: [Device]
         zCollectorPlugins: [itri.Bmc]
         zDeviceTemplates: [Device, BMC]
      templates:
         BMC:
            description: Monitoring BMC Devices
            targetPythonClass: ZenPacks.itri.BmcMonitor.BmcServer
            datasources:
               powerStatus:
                  type: Python
                  plugin_classname: ZenPacks.itri.BmcMonitor.dsplugins.BmcPowerStatus
                  cycletime: 30
